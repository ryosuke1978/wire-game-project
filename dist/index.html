<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- é©åˆ‡ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š -->
    <meta http-equiv="Cache-Control" content="max-age=0">
    
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; 
                   script-src 'self' 'unsafe-inline'; 
                   style-src 'self' 'unsafe-inline'; 
                   connect-src 'self' https://*.amazonaws.com">
    <title>ã‚¤ãƒ©ã‚¤ãƒ©æ£’ã‚²ãƒ¼ãƒ  - Wire Game</title>
    <link rel="stylesheet" href="styles-new.css?v=2">
</head>
<body>
    <div id="game-container">
        <div id="menu-screen" class="screen active">
            <h1>ã‚¤ãƒ©ã‚¤ãƒ©æ£’ã‚²ãƒ¼ãƒ </h1>
            <h2>Wire Game</h2>
            <div id="difficulty-selection">
                <h3>é›£æ˜“åº¦ã‚’é¸æŠ / Select Difficulty</h3>
                <button class="difficulty-btn" data-difficulty="easy">ã‚¤ãƒ¼ã‚¸ãƒ¼ / Easy</button>
                <button class="difficulty-btn" data-difficulty="medium">ãƒŸãƒ‡ã‚£ã‚¢ãƒ  / Medium</button>
                <button class="difficulty-btn" data-difficulty="hard">ãƒãƒ¼ãƒ‰ / Hard</button>
                <button class="difficulty-btn" data-difficulty="super-hard">ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ¼ãƒ‰ / Super Hard</button>
            </div>
            <button id="start-btn" disabled>ã‚¹ã‚¿ãƒ¼ãƒˆ / Start</button>
            <button id="show-leaderboard-btn">ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ / Leaderboard</button>
        </div>

        <div id="game-screen" class="screen">
            <div id="game-ui">
                <div id="timer">æ™‚é–“ / Time: <span id="timer-value">0.00</span>s</div>
                <div id="difficulty-display">é›£æ˜“åº¦ / Difficulty: <span id="difficulty-value">-</span></div>
            </div>
            <div id="game-layout">
                <canvas id="game-canvas" width="800" height="600"></canvas>
                <div id="touch-controls">
                    <div id="controls-title">ã‚¿ãƒƒãƒæ“ä½œ / Touch Controls</div>
                    <div id="dpad-container">
                        <button id="btn-up" class="control-btn" data-direction="up">â†‘</button>
                        <button id="btn-down" class="control-btn" data-direction="down">â†“</button>
                        <button id="btn-left" class="control-btn" data-direction="left">â†</button>
                        <button id="btn-right" class="control-btn" data-direction="right">â†’</button>
                    </div>
                    <div id="control-instructions">
                        <p>ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã„ã‚‹é–“ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒç§»å‹•ã—ã¾ã™</p>
                        <p>Hold button to move character</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="gameover-screen" class="screen">
            <h2>ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ / Game Over</h2>
            <div id="gameover-score">æ™‚é–“ / Time: <span id="gameover-time">0.00</span>s</div>
            <div id="name-input-section">
                <label for="player-name">åå‰ã‚’å…¥åŠ› / Enter Name:</label>
                <input type="text" id="player-name" maxlength="20" placeholder="ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å / Player Name">
                <div id="name-error" class="error-message"></div>
                <button id="submit-score-btn">ã‚¹ã‚³ã‚¢é€ä¿¡ / Submit Score</button>
            </div>
            <button id="restart-btn-gameover" class="restart-btn">å†ã‚¹ã‚¿ãƒ¼ãƒˆ / Restart</button>
        </div>

        <div id="victory-screen" class="screen">
            <h2>ğŸ‰ ã‚¯ãƒªã‚¢ï¼ / Victory! ğŸ‰</h2>
            <div id="victory-message">
                <p>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ / Congratulations!</p>
                <p>è¦‹äº‹ã«ã‚´ãƒ¼ãƒ«ã«åˆ°é”ã—ã¾ã—ãŸï¼ / You successfully reached the goal!</p>
            </div>
            <div id="victory-score">å®Œäº†æ™‚é–“ / Completion Time: <span id="victory-time">0.00</span>s</div>
            <div id="name-input-section-victory">
                <label for="player-name-victory">åå‰ã‚’å…¥åŠ› / Enter Name:</label>
                <input type="text" id="player-name-victory" maxlength="20" placeholder="ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å / Player Name">
                <div id="name-error-victory" class="error-message"></div>
                <button id="submit-score-btn-victory">ã‚¹ã‚³ã‚¢é€ä¿¡ / Submit Score</button>
            </div>
            <button id="restart-btn-victory" class="restart-btn">å†ã‚¹ã‚¿ãƒ¼ãƒˆ / Restart</button>
        </div>

        <div id="leaderboard-screen" class="screen">
            <h2>ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ / Leaderboard</h2>
            <div id="leaderboard-tabs">
                <button class="tab-btn active" data-difficulty="easy">ã‚¤ãƒ¼ã‚¸ãƒ¼ / Easy</button>
                <button class="tab-btn" data-difficulty="medium">ãƒŸãƒ‡ã‚£ã‚¢ãƒ  / Medium</button>
                <button class="tab-btn" data-difficulty="hard">ãƒãƒ¼ãƒ‰ / Hard</button>
                <button class="tab-btn" data-difficulty="super-hard">ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ¼ãƒ‰ / Super Hard</button>
            </div>
            <div id="leaderboard-content">
                <table id="leaderboard-table">
                    <thead>
                        <tr>
                            <th>é †ä½ / Rank</th>
                            <th>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å / Player</th>
                            <th>ã‚¹ã‚³ã‚¢ / Score</th>
                            <th>æ—¥ä»˜ / Date</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-body">
                        <!-- Leaderboard entries will be inserted here -->
                    </tbody>
                </table>
            </div>
            <button id="refresh-leaderboard-btn">æ›´æ–° / Refresh</button>
            <button id="back-to-menu-btn">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹ / Back to Menu</button>
        </div>
    </div>

    <script>
        // FINAL VERSION - All issues completely fixed
        console.log('ğŸ® Loading FINAL VERSION - All problems solved!');
        console.log('âœ… Controls: One key press = continuous movement');
        console.log('âœ… Game Over: No score submission');
        console.log('âœ… Simple game: Boundary walls only');
    </script>
    <script src="game-final.js?v=final"></script>
</body>
</html>